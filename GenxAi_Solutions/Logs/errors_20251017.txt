[2025-10-17 09:50:12.873] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 32ef4981-539a-4c8e-9999-0161755984ad, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.179] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 042fd830-5cee-41d7-87c6-539a2d42a56a, Error: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Exception Type: System.AggregateException
Exception Message: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
Inner Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)
 ---> System.ComponentModel.Win32Exception (10054): An existing connection was forcibly closed by the remote host.
   at BAL.CompanyProfileBAL.GetPromptCompany(GetPromptCompanyId model) in D:\SG_IMP\GenxAi_Solutions\BAL\CompanyProfileBAL.cs:line 143
ClientConnectionId:6f16a617-012a-4959-93c0-dfa76c9abb44
Error Number:10054,State:0,Class:20
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.199] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 042fd830-5cee-41d7-87c6-539a2d42a56a, Error: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Exception Type: System.AggregateException
Exception Message: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
Inner Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)
 ---> System.ComponentModel.Win32Exception (10054): An existing connection was forcibly closed by the remote host.
   at BAL.CompanyProfileBAL.GetPromptCompany(GetPromptCompanyId model) in D:\SG_IMP\GenxAi_Solutions\BAL\CompanyProfileBAL.cs:line 143
ClientConnectionId:6f16a617-012a-4959-93c0-dfa76c9abb44
Error Number:10054,State:0,Class:20
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.198] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 32ef4981-539a-4c8e-9999-0161755984ad, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.394] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 042fd830-5cee-41d7-87c6-539a2d42a56a. Exception Details: System.AggregateException - One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)) Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: System.AggregateException
Exception Message: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)
 ---> System.ComponentModel.Win32Exception (10054): An existing connection was forcibly closed by the remote host.
   at BAL.CompanyProfileBAL.GetPromptCompany(GetPromptCompanyId model) in D:\SG_IMP\GenxAi_Solutions\BAL\CompanyProfileBAL.cs:line 143
ClientConnectionId:6f16a617-012a-4959-93c0-dfa76c9abb44
Error Number:10054,State:0,Class:20
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.395] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 32ef4981-539a-4c8e-9999-0161755984ad. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.399] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 042fd830-5cee-41d7-87c6-539a2d42a56a. Exception Details: System.AggregateException - One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)) Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: System.AggregateException
Exception Message: One or more errors occurred. (The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.))
Stack Trace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at GenxAi_Solutions.Api.CompanyOnboardController.GetPrompt(Int32 companyId, String chosenServices) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1564
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1106
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): The client was unable to establish a connection because of an error during connection initialization process before login. Possible causes include the following:  the client tried to connect to an unsupported version of SQL Server; the server was too busy to accept new connections; or there was a resource limitation (insufficient memory or maximum allowed connections) on the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)
 ---> System.ComponentModel.Win32Exception (10054): An existing connection was forcibly closed by the remote host.
   at BAL.CompanyProfileBAL.GetPromptCompany(GetPromptCompanyId model) in D:\SG_IMP\GenxAi_Solutions\BAL\CompanyProfileBAL.cs:line 143
ClientConnectionId:6f16a617-012a-4959-93c0-dfa76c9abb44
Error Number:10054,State:0,Class:20
--------------------------------------------------------------------------------
[2025-10-17 09:50:13.400] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 32ef4981-539a-4c8e-9999-0161755984ad. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:54:32.366] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 777c5de7-4c19-4d27-8ba4-5f2cf0953b79, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:54:32.368] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 777c5de7-4c19-4d27-8ba4-5f2cf0953b79, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:54:32.467] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 777c5de7-4c19-4d27-8ba4-5f2cf0953b79. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 09:54:32.470] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 777c5de7-4c19-4d27-8ba4-5f2cf0953b79. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:01:53.605] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 496a0938-c367-4cc3-994c-8c3d74cf76de, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:01:53.627] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 496a0938-c367-4cc3-994c-8c3d74cf76de, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:01:53.775] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 496a0938-c367-4cc3-994c-8c3d74cf76de. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:01:53.777] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 496a0938-c367-4cc3-994c-8c3d74cf76de. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:03:55.727] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: 4825e3d5-dd17-4478-a6b0-cbbfaa401b8e, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:03:55.729] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: 4825e3d5-dd17-4478-a6b0-cbbfaa401b8e, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:03:55.844] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 4825e3d5-dd17-4478-a6b0-cbbfaa401b8e. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:03:55.846] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 4825e3d5-dd17-4478-a6b0-cbbfaa401b8e. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.712] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: fbfaacb1-c22f-4ff1-bfdf-c604703170e8, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.723] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: fbfaacb1-c22f-4ff1-bfdf-c604703170e8, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.809] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: 7f5bff47-2557-4b55-810b-87afe187364e, Error: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Exception Type: Microsoft.Data.SqlClient.SqlException
Exception Message: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
Inner Exception: System.ComponentModel.Win32Exception (258): The wait operation timed out.
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.868] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: Hi, CorrelationId: 7f5bff47-2557-4b55-810b-87afe187364e, Error: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Exception Type: Microsoft.Data.SqlClient.SqlException
Exception Message: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
Inner Exception: System.ComponentModel.Win32Exception (258): The wait operation timed out.
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.870] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 fbfaacb1-c22f-4ff1-bfdf-c604703170e8. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.872] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 fbfaacb1-c22f-4ff1-bfdf-c604703170e8. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.919] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 7f5bff47-2557-4b55-810b-87afe187364e. Exception Details: Microsoft.Data.SqlClient.SqlException - Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2;  Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Data.SqlClient.SqlException
Exception Message: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: System.ComponentModel.Win32Exception (258): The wait operation timed out.
--------------------------------------------------------------------------------
[2025-10-17 10:07:09.920] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 7f5bff47-2557-4b55-810b-87afe187364e. Exception Details: Microsoft.Data.SqlClient.SqlException - Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2;  Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Data.SqlClient.SqlException
Exception Message: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=18767; handshake=2; 
Stack Trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(SqlConnectionEncryptOption encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable, Boolean& fedAuthRequired, Boolean tlsFirst, String serverCertificateFilename)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, TimeoutTimer timeout, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, IDbConnectionPool pool, Func`3 accessTokenCallback)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionPoolGroupProviderInfo poolGroupProviderInfo, IDbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass28_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 199
   at DAL.ChatBotDAL.AddMetadataBulkAsync(Int64 messageId, IDictionary`2 items) in D:\SG_IMP\GenxAi_Solutions\DAL\ChatBotDAL.cs:line 219
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1133
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: System.ComponentModel.Win32Exception (258): The wait operation timed out.
--------------------------------------------------------------------------------
[2025-10-17 10:11:05.890] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hello, CorrelationId: 352f7923-529a-4646-9d2e-2222c061fe82, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:11:05.893] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hello, CorrelationId: 352f7923-529a-4646-9d2e-2222c061fe82, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:11:06.034] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 352f7923-529a-4646-9d2e-2222c061fe82. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:11:06.036] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 352f7923-529a-4646-9d2e-2222c061fe82. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService .cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:35:24.457] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 8863e1f5-a966-43aa-809d-1d68fe3c7825, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:35:24.476] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: nidhi.lad@genxai.com, Service: FileAnalytics, Message: hi, CorrelationId: 8863e1f5-a966-43aa-809d-1d68fe3c7825, Error: Call to vector store failed.
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:35:24.601] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 8863e1f5-a966-43aa-809d-1d68fe3c7825. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:35:24.603] [Error]
Category: GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware
Message: Unhandled exception POST /api/CompanyOnboard/Ask2 8863e1f5-a966-43aa-809d-1d68fe3c7825. Exception Details: Microsoft.Extensions.VectorData.VectorStoreException - Call to vector store failed. Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Exception Type: Microsoft.Extensions.VectorData.VectorStoreException
Exception Message: Call to vector store failed.
Stack Trace:    at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.EnumerateAndMapSearchResultsAsync(List`1 conditions, String extraWhereFilter, Dictionary`2 extraParameters, VectorSearchOptions`1 searchOptions, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+MoveNext()
   at Microsoft.SemanticKernel.Connectors.SqliteVec.SqliteCollection`2.SearchAsync[TInput](TInput searchValue, Int32 top, VectorSearchOptions`1 options, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Services.VectorStoreSeedService.QueryAsync(String question, String sqliteDbPath, Int32 topSections, Int32 topChunks) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Services\VectorStoreSeedService.cs:line 375
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1164
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at GenxAi_Solutions.Utils.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Utils\Middleware\ErrorHandlingMiddleware.cs:line 139
Inner Exception: Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: vec_chapter_index'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Extensions.VectorData.VectorStoreErrorHandler.ExecuteWithErrorHandlingAsync[TResult](DbConnection connection, VectorStoreCollectionMetadata metadata, String operationName, Func`1 operation, CancellationToken cancellationToken)
--------------------------------------------------------------------------------
[2025-10-17 10:56:01.848] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: admin@acgindia.co.in, Service: FileAnalytics, Message: hi, CorrelationId: ba4257a1-5d17-4164-857a-2f4af5cd6d0f, Error: The operation was canceled.
Exception Type: System.Threading.Tasks.TaskCanceledException
Exception Message: The operation was canceled.
Stack Trace:    at System.ClientModel.Internal.CancellationHelper.ThrowOperationCanceledException(Exception innerException, CancellationToken cancellationToken)
   at System.ClientModel.Internal.CancellationHelper.ThrowIfCancellationRequested(CancellationToken cancellationToken, Exception innerException)
   at System.ClientModel.Internal.CancellationHelper.ThrowIfCancellationRequestedOrTimeout(CancellationToken messageToken, CancellationToken timeoutToken, Exception innerException, TimeSpan timeout)
   at System.ClientModel.Primitives.PipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
   at System.ClientModel.Primitives.PipelineTransport.ProcessAsync(PipelineMessage message)
   at System.ClientModel.Primitives.PipelineTransport.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.MessageLoggingPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.MessageLoggingPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ApiKeyAuthenticationPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at GenericActionPipelinePolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at OpenAI.GenericActionPipelinePolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ClientPipeline.SendAsync(PipelineMessage message)
   at OpenAI.ClientPipelineExtensions.ProcessMessageAsync(ClientPipeline pipeline, PipelineMessage message, RequestOptions options)
   at OpenAI.Chat.ChatClient.CompleteChatAsync(BinaryContent content, RequestOptions options)
   at OpenAI.Chat.ChatClient.CompleteChatAsync(IEnumerable`1 messages, ChatCompletionOptions options, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.OpenAI.ClientCore.RunRequestAsync[T](Func`1 request)
   at Microsoft.SemanticKernel.Connectors.OpenAI.ClientCore.GetChatMessageContentsAsync(String targetModel, ChatHistory chatHistory, PromptExecutionSettings executionSettings, Kernel kernel, CancellationToken cancellationToken)
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1205
Inner Exception: System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at System.ClientModel.Primitives.HttpClientPipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
   at System.ClientModel.Primitives.HttpClientPipelineTransport.ProcessCoreAsync(PipelineMessage message)
   at System.ClientModel.Primitives.PipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
--------------------------------------------------------------------------------
[2025-10-17 10:56:01.881] [Error]
Category: GenxAi_Solutions.Api.CompanyOnboardController
Message: Error in AskChat_up API - User: admin@acgindia.co.in, Service: FileAnalytics, Message: hi, CorrelationId: ba4257a1-5d17-4164-857a-2f4af5cd6d0f, Error: The operation was canceled.
Exception Type: System.Threading.Tasks.TaskCanceledException
Exception Message: The operation was canceled.
Stack Trace:    at System.ClientModel.Internal.CancellationHelper.ThrowOperationCanceledException(Exception innerException, CancellationToken cancellationToken)
   at System.ClientModel.Internal.CancellationHelper.ThrowIfCancellationRequested(CancellationToken cancellationToken, Exception innerException)
   at System.ClientModel.Internal.CancellationHelper.ThrowIfCancellationRequestedOrTimeout(CancellationToken messageToken, CancellationToken timeoutToken, Exception innerException, TimeSpan timeout)
   at System.ClientModel.Primitives.PipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
   at System.ClientModel.Primitives.PipelineTransport.ProcessAsync(PipelineMessage message)
   at System.ClientModel.Primitives.PipelineTransport.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.MessageLoggingPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.MessageLoggingPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ApiKeyAuthenticationPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.PipelinePolicy.ProcessNextAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessSyncOrAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex, Boolean async)
   at System.ClientModel.Primitives.ClientRetryPolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at GenericActionPipelinePolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at OpenAI.GenericActionPipelinePolicy.ProcessAsync(PipelineMessage message, IReadOnlyList`1 pipeline, Int32 currentIndex)
   at System.ClientModel.Primitives.ClientPipeline.SendAsync(PipelineMessage message)
   at OpenAI.ClientPipelineExtensions.ProcessMessageAsync(ClientPipeline pipeline, PipelineMessage message, RequestOptions options)
   at OpenAI.Chat.ChatClient.CompleteChatAsync(BinaryContent content, RequestOptions options)
   at OpenAI.Chat.ChatClient.CompleteChatAsync(IEnumerable`1 messages, ChatCompletionOptions options, CancellationToken cancellationToken)
   at Microsoft.SemanticKernel.Connectors.OpenAI.ClientCore.RunRequestAsync[T](Func`1 request)
   at Microsoft.SemanticKernel.Connectors.OpenAI.ClientCore.GetChatMessageContentsAsync(String targetModel, ChatHistory chatHistory, PromptExecutionSettings executionSettings, Kernel kernel, CancellationToken cancellationToken)
   at GenxAi_Solutions.Api.CompanyOnboardController.AskChat_up(String message, String service, Nullable`1 conversationId, CancellationToken ct) in D:\GENXAI_ProductSVN\GenxAi_WEB\GenxAi_Solutions\GenxAi_Solutions\Api\CompanyOnboardController.cs:line 1205
Inner Exception: System.Threading.Tasks.TaskCanceledException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at System.ClientModel.Primitives.HttpClientPipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
   at System.ClientModel.Primitives.HttpClientPipelineTransport.ProcessCoreAsync(PipelineMessage message)
   at System.ClientModel.Primitives.PipelineTransport.ProcessSyncOrAsync(PipelineMessage message, Boolean async)
--------------------------------------------------------------------------------
